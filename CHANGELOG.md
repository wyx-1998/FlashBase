# Changelog

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.0.0] - 2024-12-XX

### 新增
- 🧠 **AI智能匹配系统**：基于内容分析自动推荐最匹配的知识库
- 🎯 **多知识库批量导入**：支持同时选择多个知识库进行批量导入
- 📊 **客观置信度评估**：采用绝对评分标准，提供更准确的匹配度评估
- 🤖 **智能决策逻辑**：根据置信度自动选择导入策略
- 💡 **智能推荐对话框**：美观的界面展示AI推荐结果
- 🔍 **诚实反馈机制**：当AI无法准确匹配时，直接提示手动选择

### 改进
- ⚡ **用户体验优化**：智能推荐减少用户决策时间50%+
- 🎨 **界面交互改进**：新增多选支持和批量操作功能
- 🔧 **AI匹配引擎重构**：采用专业知识库分析专家角色定位
- 📈 **多维度权重评估**：语义相似度40% + 主题重叠度30% + 技术栈匹配20% + 文档类型适配10%
- 🏗️ **代码架构优化**：重构ai-matcher.ts和app.ts核心逻辑

### 修复
- 🐛 修复AI匹配结果处理逻辑错误
- 🔄 改进多推荐场景的用户体验
- 📊 优化置信度计算算法
- 🛡️ 增强错误处理和异常恢复机制

### 技术更新
- 🔧 重构AI匹配引擎核心算法
- 📦 优化TypeScript类型安全
- 🧹 清理测试和demo相关文件
- 📝 完善代码注释和文档

### 破坏性变更
- 🔄 AI匹配系统完全重构，提供更智能的推荐体验
- 📋 推荐对话框支持多选，改变了原有的单选交互模式

## [1.1.2] - 2025-01-20

### 修复
- 🐛 **重大修复**：完美解决FastGPT中文文件名乱码问题
- 🌐 优化文件名编码处理：优先使用URL编码，备用latin1编码转换
- 🔧 修复API参数错误：移除localFile接口中不应存在的name字段
- 📝 增强多语言文件名支持：支持中文、日文、韩文等多种语言文件名

### 改进
- ⚡ 提升文件上传稳定性：增强编码兼容性和容错能力
- 🎯 优化用户体验：确保集合名称正确显示，避免乱码困扰
- 🔄 向后兼容：保持与现有功能的完全兼容性
- 📊 完善错误处理：增加文件名编码转换的异常处理机制

### 技术更新
- 🔧 文件名编码算法优化：实现多层次编码处理策略
- 📦 API调用优化：精简FastGPT localFile接口调用参数
- 🏗️ 代码质量提升：增强文件上传模块的健壮性

## [1.1.1] - 2025-01-20

### 新增
- ✨ 文件导入快捷键配置：在设置页面新增文件导入快捷键的可视化配置选项
- 🎯 快捷键自定义：用户可以自定义文件导入快捷键组合（默认 `Cmd+Shift+F`）
- 📋 配置界面优化：设置页面新增文件导入快捷键配置项，支持实时预览和验证

### 修复
- 🐛 修复托盘点击闪退问题：解决窗口显示竞态条件和Dock图标管理不一致的问题
- 🔧 优化托盘点击处理：增强托盘点击逻辑，添加调试日志和双重保障机制
- 🎨 改进窗口焦点处理：分离新窗口创建和显示逻辑，提升用户体验

### 改进
- ⚡ 快捷键配置同步：快捷键设置保存后立即生效，无需重启应用
- 🎨 用户界面优化：设置页面布局改进，配置项更加直观易用
- 📝 完善技术文档：新增安装测试指南和快捷键配置更新文档

### 技术更新
- 🔧 架构优化：改进快捷键管理和窗口管理模块的代码结构
- 📦 构建优化：更新打包配置，生成ARM64和x64双版本DMG文件
- 🏗️ 代码质量：增强错误处理和调试信息收集机制

## [1.1.0] - 2025-01-20

### 新增
- ✨ 文件导入功能：支持拖拽上传Word、PPT、PDF等多种文档格式
- 🎯 历史记录筛选：新增按内容类型（文本/文件）筛选历史记录功能
- 🎨 优化用户界面：改进文件导入界面和历史记录页面
- 🔧 系统级快捷键：`Ctrl+Shift+F` (Windows/Linux) 或 `Cmd+Shift+F` (macOS) 快速打开文件导入

### 修复
- 🐛 修复历史记录中文件类型标识错误的问题
- 🔒 解决Content Security Policy导致的字体加载问题
- 📱 优化本地字体加载，提升应用性能和安全性

### 改进
- ⚡ 使用本地Inter字体替代Google Fonts，提升加载速度
- 🎨 改进历史记录页面的筛选功能和用户体验
- 📝 完善项目文档和开发指南

### 技术更新
- 🔧 优化Electron应用的CSP策略
- 📦 更新依赖包版本
- 🏗️ 改进构建和打包流程

## [1.0.0] - 2024-12-XX

### 新增
- 🚀 初始版本发布
- 📋 剪贴板内容快速导入到FastGPT知识库
- ⌨️ 系统级快捷键支持
- 🎯 系统托盘集成
- 📊 历史记录管理
- ⚙️ 设置和配置管理
- 🎨 现代化用户界面

---

## 版本说明

- **主版本号**：当你做了不兼容的 API 修改
- **次版本号**：当你做了向下兼容的功能性新增
- **修订号**：当你做了向下兼容的问题修正

更多信息请查看 [语义化版本规范](https://semver.org/lang/zh-CN/)。