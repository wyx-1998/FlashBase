# FlashBase 安装和快捷键测试指南

## 📦 安装步骤

### 1. 关闭旧版本应用
如果 FlashBase 正在运行，请先完全退出：
- 右键点击托盘图标 → 退出
- 或者使用 `Cmd+Q` 快捷键退出

### 2. 安装新版本
1. 双击打开 `FlashBase Dev-1.1.0-dev-arm64.dmg` 文件
2. 将 `FlashBase Dev.app` 拖拽到 `Applications` 文件夹
3. 如果提示替换现有应用，选择"替换"
4. 关闭 DMG 窗口

### 3. 启动应用
1. 从 Applications 文件夹启动 FlashBase Dev
2. 如果出现安全提示，请：
   - 打开"系统偏好设置" → "安全性与隐私"
   - 点击"仍要打开"按钮
   - 或者在终端运行：`sudo xattr -rd com.apple.quarantine "/Applications/FlashBase Dev.app"`

## 🔧 快捷键配置测试

### 步骤 1：检查默认配置
1. 启动应用后，点击托盘图标 → "设置"
2. 切换到"快捷键设置"标签页
3. 确认看到以下配置项：
   - ✅ **剪贴板导入**: `Cmd+Shift+V`
   - ✅ **文件导入**: `Cmd+Shift+F` ← 新增功能
   - ✅ **显示面板**: `Cmd+Shift+D`

### 步骤 2：测试文件导入快捷键
1. **默认快捷键测试**：
   - 按下 `Cmd+Shift+F`
   - 应该弹出文件选择对话框
   - 选择任意文本文件进行测试

2. **自定义快捷键测试**：
   - 在设置中将"文件导入"改为其他组合（如 `Cmd+Shift+O`）
   - 点击"保存设置"
   - 按下新设置的快捷键
   - 确认文件选择器正常弹出

### 步骤 3：验证其他功能
1. **剪贴板导入**：
   - 复制一些文本到剪贴板
   - 按下 `Cmd+Shift+V`
   - 确认导入功能正常

2. **快速面板**：
   - 按下 `Cmd+Shift+D`
   - 确认快速操作面板显示

## 🐛 故障排除

### 问题 1：快捷键不响应
**可能原因**：
- 快捷键被其他应用占用
- 应用没有获得辅助功能权限

**解决方案**：
1. 打开"系统偏好设置" → "安全性与隐私" → "隐私" → "辅助功能"
2. 确保 FlashBase Dev 在列表中且已勾选
3. 如果不在列表中，点击 "+" 添加应用

### 问题 2：文件选择器不弹出
**检查步骤**：
1. 查看控制台日志：
   ```bash
   log show --predicate 'process == "FlashBase Dev"' --info --last 5m
   ```
2. 确认应用进程正在运行：
   ```bash
   ps aux | grep -i "FlashBase Dev" | grep -v grep
   ```

### 问题 3：设置不保存
**解决方案**：
1. 检查应用是否有写入权限
2. 重启应用后再次尝试
3. 查看设置文件位置：`~/Library/Application Support/flashbase-dev-settings.json`

## 📋 功能验证清单

请逐一验证以下功能：

- [ ] 应用正常启动
- [ ] 托盘图标显示正常
- [ ] 设置页面可以打开
- [ ] 快捷键设置标签页显示"文件导入"选项
- [ ] 默认快捷键 `Cmd+Shift+F` 可以触发文件选择器
- [ ] 可以自定义文件导入快捷键
- [ ] 自定义快捷键保存后立即生效
- [ ] 文件导入功能正常工作
- [ ] 其他快捷键（剪贴板导入、显示面板）正常

## 🔍 调试信息收集

如果遇到问题，请收集以下信息：

1. **系统信息**：
   ```bash
   system_profiler SPSoftwareDataType | grep "System Version"
   ```

2. **应用版本**：
   - 在应用中查看：设置 → 关于
   - 或检查应用包信息

3. **错误日志**：
   ```bash
   log show --predicate 'process == "FlashBase Dev"' --info --last 10m
   ```

4. **设置文件内容**：
   ```bash
   cat ~/Library/Application\ Support/flashbase-dev-settings.json
   ```

## 📞 技术支持

如果按照上述步骤仍然无法解决问题，请提供：
- 具体的错误现象描述
- 系统版本信息
- 错误日志（如有）
- 已尝试的解决步骤

---

## 🎉 成功标志

当您看到以下现象时，说明安装和配置成功：

1. ✅ 设置页面中显示"文件导入"快捷键配置
2. ✅ 按下 `Cmd+Shift+F` 弹出文件选择对话框
3. ✅ 可以成功导入文件到知识库
4. ✅ 自定义快捷键设置后立即生效

恭喜！您已成功安装并配置了 FlashBase 的文件导入快捷键功能！